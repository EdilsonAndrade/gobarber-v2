import r,{createContext as n,useContext as e,useMemo as t,useCallback as o,useEffect as u,forwardRef as i,useState as a,useRef as c,useImperativeHandle as f}from"react";import l from"dot-object";var s=n({});function p(r){var n=e(s),i=n.initialData,a=n.errors,c=n.scopePath,f=n.unregisterField,p=n.registerField,v=n.clearFieldError;if(!r)throw new Error('You need to provide the "name" prop.');var d=t((function(){return c?c+"."+r:r}),[r,c]),h=t((function(){return l.pick(d,i)}),[d,i]),b=t((function(){return a[d]}),[a,d]),y=o((function(){v(d)}),[v,d]);return u((function(){return function(){return f(d)}}),[d,f]),{fieldName:d,registerField:p,defaultValue:h,clearError:y,error:b}}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var v=function(){return(v=Object.assign||function(r){for(var n,e=1,t=arguments.length;e<t;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o]);return r}).apply(this,arguments)};function d(r,n){var e,t,o,u,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,t&&(o=2&u[0]?t.return:u[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,u[1])).done)return o;switch(t=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,t=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=n.call(r,i)}catch(r){u=[6,r],t=0}finally{e=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}}var h=i((function(n,e){var t=n.initialData,u=void 0===t?{}:t,i=n.children,p=n.onSubmit,h=a({}),b=h[0],y=h[1],m=c([]),g=o((function(r){return m.current.find((function(n){return n.name===r}))}),[]),w=o((function(r){var n=r.ref,e=r.getValue,t=r.path;return e?e(n):t&&l.pick(t,n)}),[]),E=o((function(r,n){var e=r.path,t=r.ref,o=r.setValue;return o?o(t,n):!!e&&l.set(e,n,t)}),[]),F=o((function(r){var n=r.clearValue,e=r.ref,t=r.path;return n?n(e,""):t&&l.set(t,"",e)}),[]),O=o((function(r){void 0===r&&(r={}),m.current.forEach((function(n){var e=n.name,t=n.ref,o=n.path,u=n.clearValue;return u?u(t,r[e]):o&&l.set(o,r[e]?r[e]:"",t)}))}),[]),P=o((function(r){var n={};m.current.forEach((function(e){n[e.name]=l.pick(e.name,r)})),Object.entries(n).forEach((function(r){var n=r[0],e=r[1],t=g(n);t&&E(t,e)}))}),[g,E]),j=o((function(r){var n=l.dot(r);y(n)}),[]),x=o((function(){var r={};return m.current.forEach((function(n){r[n.name]=w(n)})),l.object(r),r}),[w]),k=o((function(r){return n=void 0,e=void 0,o=function(){var n;return d(this,(function(e){return r&&r.preventDefault(),n=x(),p(n,{reset:O},r),[2]}))},new((t=void 0)||(t=Promise))((function(r,u){function i(r){try{c(o.next(r))}catch(r){u(r)}}function a(r){try{c(o.throw(r))}catch(r){u(r)}}function c(n){n.done?r(n.value):new t((function(r){r(n.value)})).then(i,a)}c((o=o.apply(n,e||[])).next())}));var n,e,t,o}),[p,x,O]),V=o((function(r){m.current.push(r)}),[]),D=o((function(r){var n=m.current.findIndex((function(n){return n.name===r}));n>-1&&m.current.splice(n,1)}),[]),S=o((function(r){y((function(n){var e;return v(v({},n),((e={})[r]=void 0,e))}))}),[]);return f(e,(function(){return{getFieldValue:function(r){var n=g(r);return!!n&&w(n)},setFieldValue:function(r,n){var e=g(r);return!!e&&E(e,n)},getFieldError:function(r){return b[r]},setFieldError:function(r,n){y((function(e){var t;return v(v({},e),((t={})[r]=n,t))}))},clearField:function(r){var n=g(r);n&&F(n)},getErrors:function(){return b},setErrors:function(r){return j(r)},getData:function(){return x()},getFieldRef:function(r){var n=g(r);return!!n&&n.ref},setData:function(r){return P(r)},reset:function(r){return O(r)},submitForm:function(){k()}}})),r.createElement(s.Provider,{value:{initialData:u,errors:b,scopePath:"",registerField:V,unregisterField:D,clearFieldError:S,handleSubmit:k}},i)}));function b(n){var t=n.path,o=n.children,u=e(s),i=u.scopePath,a=function(r,n){var e={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&n.indexOf(t)<0&&(e[t]=r[t]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(t=Object.getOwnPropertySymbols(r);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(r,t[o])&&(e[t[o]]=r[t[o]])}return e}(u,["scopePath"]);return r.createElement(s.Provider,{value:v(v({},a),{scopePath:i.concat(i?"."+t:t)})},o)}export{s as FormContext,h as FormProvider,b as Scope,p as useField};
//# sourceMappingURL=index.es.js.map
